/* =========================================================
   ROOT VARIABLES
   ========================================================= */
:root{
  /* Page */
  --page-w: 832px;
  --page-h: 1472px;
  --page-scale: 0.60;

  /* Layout */
  --content-pad-y: 68px;
  --content-pad-x: 46px;
  --stack-gap: 24px;

  /* UI colors */
  --bg: #0b0d10;
  --panel: rgba(255,255,255,.06);
  --line: rgba(255,255,255,.10);
  --text: rgba(255,255,255,.92);
  --muted: rgba(255,255,255,.65);
  --accent: #d7c08a;

  /* Fonts */
  --ui-font: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;

  /* Paper (default) */
  --paperA: #f7f1e3;
  --paperB: #fbf7ef;

  /* Theme overlay */
  --theme-img: none;
  --theme-img-opacity: 0;
  --theme-img-blend: normal;

  /* Bubble typography */
  --bubble-font: 25px;
  --bubble-line: 1.38;

  /* Bubble paddings */
  --bubble-pad-x: 22px;

  /* Speaker names */
  --name-color-supa: rgba(10,12,14,.82);
  --name-color-me: rgba(10,12,14,.82);

  /* Bubble colors (global, clean white) */
  --bubble-bg-supa: rgba(255,255,255,.82);
  --bubble-text-supa: rgba(10,12,14,.92);
  --bubble-border-supa: rgba(255,255,255,.65);

  --bubble-bg-me: rgba(255,255,255,.82);
  --bubble-text-me: rgba(10,12,14,.92);
  --bubble-border-me: rgba(255,255,255,.65);
}

/* =========================================================
   THEMES
   ========================================================= */
:root[data-theme="classic"]{
  --paperA: #f7f1e3;
  --paperB: #fbf7ef;
}

:root[data-theme="marbrenoir"]{
  --paperA: #0f0f12;
  --paperB: #0b0b0e;

  --theme-img: url("themes/marbrenoir.png");
  --theme-img-opacity: 1;
}

/* =========================================================
   BASE
   ========================================================= */
*{ box-sizing: border-box; }
html, body{ height: 100%; }
body{
  margin: 0;
  font-family: var(--ui-font);
  color: var(--text);
  background:
    radial-gradient(900px 540px at 20% 0%, rgba(215,192,138,.10), transparent 55%),
    radial-gradient(900px 540px at 85% 10%, rgba(127,186,209,.08), transparent 55%),
    var(--bg);
}

/* =========================================================
   PAGE
   ========================================================= */
.page{
  width: var(--page-w);
  height: var(--page-h);
  border-radius: 18px;
  overflow: hidden;
  border: 1px solid rgba(255,255,255,.12);
  transform: scale(var(--page-scale));
  transform-origin: top left;
}

.page .paper{
  position: absolute;
  inset: 0;
  background:
    linear-gradient(180deg, var(--paperA), var(--paperB));
}

.page .paper::after{
  content:"";
  position:absolute;
  inset:0;
  background: var(--theme-img) center / cover no-repeat;
  opacity: var(--theme-img-opacity);
  pointer-events:none;
}

.page .content{
  position: relative;
  height: 100%;
  padding: var(--content-pad-y) var(--content-pad-x);
  display: flex;
  flex-direction: column;
  gap: var(--stack-gap);
}

/* =========================================================
   BUBBLES
   ========================================================= */
.bubble{
  max-width: min(86%, 680px, 50ch);
  border-radius: 12px;
  padding: 16px var(--bubble-pad-x) 18px;
  font-size: var(--bubble-font);
  line-height: var(--bubble-line);
  border: 1px solid;
}

.bubble.left{
  align-self: flex-start;
  background: var(--bubble-bg-supa);
  color: var(--bubble-text-supa);
  border-color: var(--bubble-border-supa);
}

.bubble.right{
  align-self: flex-end;
  background: var(--bubble-bg-me);
  color: var(--bubble-text-me);
  border-color: var(--bubble-border-me);
}

/* Names */
.bubbleName{
  font-size: .92em;
  font-weight: 600;
  margin-bottom: 6px;
  opacity: .92;
}
.bubble.left .bubbleName{ color: var(--name-color-supa); }
.bubble.right .bubbleName{ color: var(--name-color-me); text-align:right; }

/* =========================================================
   EXPORT
   ========================================================= */
body.exporting .page{
  transform: none !important;
  border: none !important; /* ❌ plus de liseré blanc */
}
body.exporting .controls,
body.exporting .hero,
body.exporting .bubbleTools{
  display:none !important;
}
